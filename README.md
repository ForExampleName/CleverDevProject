# Описание проектов

В данном репозитории содержатся 2 проекта:
- old-system - для старой системы; 
- new-system - для новой.

**Old-system** содержит код для создания таблиц и наполения тестовыми данными в классе `DataInitializerRunner`.
Инициализация (создание таблиц, стирание данных и заполнение) происходит сразу при запуске приложения (при каждом запуске).
Чтобы ее отключить, можно поменять ***profile***. Найти его можно в файле ***.env***. Данный файл содержит набор 
констант, используемый при запуске docker-compose (ну, Вы знаете).

**New-system** представляет проект, который ответственен за обновление записей и всего связанного с ними. По умолчанию
данный проект не запускает шедулер. Запустить синхронизацию можно вручную, сделав **POST-запрос** на URL http://localhost:8080/api/v1/synchronization/force.
Однако, по заданию синхронизация должна происходить по графику. Для этого в файле ***.env*** можно выбрать соответствующий 
***profile***. Он активирует шедулер.

ВАЖНО: **при инициализации** базы данных **используется многопоточность** (8 потоков по умолчанию), **при синхронизации 
также**, но с меньшим числом потоков - 4. Поменять число потоков можно также в файле ***.env***.

# Запуск

Запуск предполагает с использованием Docker Compose.<br>
В файле ***.env*** можно поменять некоторые параметры.

# Примечания
- В задании ничего не сказано про поле "datetime" в ответе "/notes" (таким образом, заполняется рандомно).
- Поскольку в задании пациенты и клиенты связаны через строку guid в объекте пациента, мне не было понятно как именно 
идентифицировать одного и того же человека в двух системах. Можно было бы использовать некий уникальный номер документа, например. 
Тем не менее я выбрал просто связку "имя-фамилия" (генерирую уникальными - понятно, что в жизни так не работает), поскольку, 
как я ранее сказал, в задании прописано про список guid (решил, что тут новый столбец нельзя добавить в соответствии с заданием).
- Про статус в старой системе не сказано, влияет ли он на статус в новой системе. Поэтому обрабатываются все заметки из старой 
системы для активных пользователей новой системы. Также, если появился в старой системе новый пользователь (в новой такого с полным 
именем нет), статус этого пользователя будет равен статусу в старой системе.
- Поскольку в ответе из старой системы дял comments только один пользователь, предположил, что это либо тот, кто создал запись, 
либо последний, кто её обновил.